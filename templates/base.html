<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BASH Studio</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <style>
        /* üñ±Ô∏è –°—Ç–∏–ª–∏ –¥–ª—è –±–æ–ª–µ–µ –ø—Ä–æ–∑—Ä–∞—á–Ω–æ–≥–æ –∏ —É–∑–∫–æ–≥–æ —Å–∫—Ä–æ–ª–ª–∞ */
::-webkit-scrollbar {
    width: 6px; /* –£–∂–µ —Å–∫—Ä–æ–ª–ª–±–∞—Ä */
    height: 6px; /* –£–∂–µ —Å–∫—Ä–æ–ª–ª–±–∞—Ä */
}

::-webkit-scrollbar-thumb {
    background-color: rgba(255, 0, 255, 0.6); /* –ü–æ–ª—É–ø—Ä–æ–∑—Ä–∞—á–Ω—ã–π —Ü–≤–µ—Ç */
    border-radius: 12px; /* –ë–æ–ª–µ–µ –æ–∫—Ä—É–≥–ª–µ–Ω–Ω—ã–π */
    box-shadow: 0 0 5px rgba(255, 0, 255, 0.6), 0 0 10px rgba(255, 0, 255, 0.6), 0 0 15px rgba(255, 0, 255, 0.6);
}

::-webkit-scrollbar-track {
    background: rgba(255, 255, 255, 0.05); /* –ë–æ–ª–µ–µ –ø—Ä–æ–∑—Ä–∞—á–Ω—ã–π —Ç—Ä–µ–∫ */
    border-radius: 12px; /* –ë–æ–ª–µ–µ –æ–∫—Ä—É–≥–ª–µ–Ω–Ω—ã–π */
}

body {
    scrollbar-width: thin;
    scrollbar-color: rgba(255, 0, 255, 0.6) rgba(255, 255, 255, 0.05); /* –ü–æ–ª—É–ø—Ä–æ–∑—Ä–∞—á–Ω—ã–µ —Ü–≤–µ—Ç–∞ –¥–ª—è Firefox */
}


        body, html {
            margin: 0;
            padding: 0;
            width: 100%;
            height: 100%;
            overflow: hidden;
            background: #0a0a0a;
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            font-family: 'Roboto', sans-serif;
        }
        canvas {
            display: block;
 
            position: absolute;
            top: 0;
            left: 0;
        }
        
        #renderCanvas {
            width: 100%;
            height: 100%;
        }

        @keyframes slideUp {
            0% {
                opacity: 0;
                transform: translateY(100%);
            }
            100% {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        .button-container {
            position: fixed;
            bottom: 20px;
            display: flex;
            justify-content: center;
            gap: 20px;
            animation: slideUp 1.1s ease-out;
        }
        
        
        .button {
            display: flex;
            align-items: center;
            background: rgba(255, 255, 255, 0.1);
            border: 2px solid rgba(255, 255, 255, 0.3);
            border-radius: 10px;
            color: white;
            font-size: 18px;
            text-align: center;
            cursor: pointer;
            padding: 10px 20px;
            transition: all 0.9s ease;
            overflow: hidden;
        }
        
        .button i {
            font-size: 24px;
            margin-right: 10px;
        }
        
        .button span {
            width: 0;
            opacity: 0;
            overflow: hidden;
            transition: all 1.1s ease;
        }
        
        .button:hover span {
            width: auto;
            opacity: 1;
            margin-left: 5px;
        }
        
        .button:hover {
            border-color: #ff00ff;
            box-shadow: 0 0 10px #ff00ff;
            transform: scale(1.05);
        }
        
        .modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            backdrop-filter: blur(5px);
            display: flex;
            justify-content: center;
            align-items: center;
            visibility: hidden;
            opacity: 0;
            transition: opacity 0.3s ease;
            z-index: 20;
        }
        .modal.active {
            visibility: visible;
            opacity: 1;
        }
        .modal-content {
            background: rgba(255, 255, 255, 0.1);
            border: 2px solid rgba(255, 255, 255, 0.3);
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 0 15px rgba(255, 0, 255, 0.5);
            text-align: center;
            color: white;
            position: relative;
        }
        .modal-content h2 {
            font-size: 2rem;
            margin-bottom: 20px;
        }
        .modal-content select {
            background: rgba(0, 0, 0, 0.3);
            border: 2px solid rgba(255, 255, 255, 0.3);
            padding: 10px;
            width: 100%;
            margin-bottom: 20px;
            color: white;
            border-radius: 10px;
        }
        .modal-content button {
            background: rgba(255, 0, 255, 0.2);
            border: 2px solid #ff00ff;
            padding: 10px 20px;
            color: white;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        .modal-content button:hover {
            background: rgba(255, 0, 255, 0.3);
            box-shadow: 0 0 10px #ff00ff;
        }
        .modal-content .close-btn {
            position: absolute;
            top: 10px;
            right: 10px;
            cursor: pointer;
            color: white;
        }
        /* –ò–∑–º–µ–Ω–∏—Ç–µ –Ω–∞—á–∞–ª—å–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –¥–ª—è –∏–∫–æ–Ω–æ–∫ –ø–∞–ø–æ–∫ –∏ —Ñ–∞–π–ª–æ–≤ */
        .folder-icon, .file-icon {
            display: inline-block;
            margin: 10px;
            text-align: center;
            cursor: pointer;
            width: 120px;
            position: relative;
            height: 100px;
            z-index: 10;
            opacity: 0; /* –ù–∞—á–∞–ª—å–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –Ω–µ–≤–∏–¥–∏–º–æ–µ */
            transform: translateY(-20px); /* –ù–∞—á–∞–ª—å–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ: —Å–º–µ—â–µ–Ω–∏–µ –≤–≤–µ—Ä—Ö */
            transition: opacity 0.7s ease, transform 0.9s ease; /* –ü–ª–∞–≤–Ω–æ–µ –ø–æ—è–≤–ª–µ–Ω–∏–µ –∏ –ø–µ—Ä–µ–º–µ—â–µ–Ω–∏–µ */
        }

        /* –ü–ª–∞–≤–Ω–æ–µ –ø–æ—è–≤–ª–µ–Ω–∏–µ –∏ –ø–µ—Ä–µ–º–µ—â–µ–Ω–∏–µ –Ω–∞ –º–µ—Å—Ç–æ */
        .folder-icon.appear, .file-icon.appear {
            opacity: 1;
            transform: translateY(0); /* –í–æ–∑–≤—Ä–∞—â–µ–Ω–∏–µ –Ω–∞ –º–µ—Å—Ç–æ */
        }

        
    
        .folder-icon:hover, .file-icon:hover {
            transform: scale(1.1); /* –≠—Ñ—Ñ–µ–∫—Ç —É–≤–µ–ª–∏—á–µ–Ω–∏—è –ø—Ä–∏ –Ω–∞–≤–µ–¥–µ–Ω–∏–∏ */
        }
    
        @keyframes fadeInMove {
            to {
                opacity: 1;
                transform: translateY(0); /* –û–∫–æ–Ω—á–∞—Ç–µ–ª—å–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ: –Ω–∞ –º–µ—Å—Ç–µ */
            }
        }
        .folder-icon i, .file-icon i {
            font-size: 48px; /* Adjust icon size */
            color: #4b6cb7; /* Blue for folders */
        }
        
        .file-icon i {
            color: #c94bff; /* Purple for files */
        }
        

    
        .folder-icon span, .file-icon span {
            display: block;
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
            max-height: 2em;
            line-height: 1em;
            font-size: 0.9em; /* Smaller text size */
            padding: 5px;
        }
        
        .context-menu {
            position: absolute;
            background: rgba(255, 255, 255, 0.9);
            border-radius: 10px;
            padding: 10px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.5);
            display: none;
            z-index: 10;
        }
        .context-menu ul {
            list-style: none;
            padding: 0;
            margin: 0;
        }
        .context-menu li {
            padding: 10px;
            cursor: pointer;
        }
        .context-menu li:hover {
            background: #ff00ff;
            color: white;
        }

        
        /* –î–æ–±–∞–≤–∏—Ç—å –∫–ª–∞—Å—Å—ã –¥–ª—è –∞–Ω–∏–º–∞—Ü–∏–∏ –∑–∞–≥–æ–ª–æ–≤–∫–∞ –∏ –ª–æ–≥–æ */
        .logo-transition {
            transition: all 0.5s ease-in-out;
        }

        .hidden {
            opacity: 0;
            visibility: hidden;
        }

        .visible {
            opacity: 1;
            visibility: visible;
        }
        /* –û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ —Å—Ç–∏–ª–∏ –¥–ª—è –º–∞–ª–µ–Ω—å–∫–æ–≥–æ –ª–æ–≥–æ—Ç–∏–ø–∞ */
        .small-logo {
            position: absolute;
            top: 10px;
            left: 10px; /* –ò–∑–º–µ–Ω–µ–Ω–æ –Ω–∞ –ª–µ–≤—É—é —Å—Ç–æ—Ä–æ–Ω—É */
            color: white;
            color: #00ff00; /* –ö–∏—Å–ª–æ—Ç–Ω—ã–π —Ü–≤–µ—Ç –¥–ª—è –∑–Ω–∞—á–∫–∞ —Ç–µ—Ä–º–∏–Ω–∞–ª–∞ */
            text-align: center;
            z-index: 2;
            transition: opacity 0.3s ease, transform 0.5s ease-in-out;
            transform: translate(50%, 50%); /* –ü–æ–∑–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞ –ø—Ä–µ–¥–µ–ª–∞–º–∏ —ç–∫—Ä–∞–Ω–∞ */
        }

        .small-logo.visible {
            opacity: 1;
            visibility: visible;
            transform: translate(0, 0); /* –í–æ–∑–≤—Ä–∞—â–µ–Ω–∏–µ –Ω–∞ –∏—Å—Ö–æ–¥–Ω—É—é –ø–æ–∑–∏—Ü–∏—é */
        }

        .small-logo i {
            font-size: 24px; /* –†–∞–∑–º–µ—Ä –∑–Ω–∞—á–∫–∞ —Ç–µ—Ä–º–∏–Ω–∞–ª–∞ */
            margin-right: 10px; /* –û—Ç—Å—Ç—É–ø –º–µ–∂–¥—É –∑–Ω–∞—á–∫–æ–º –∏ —Ç–µ–∫—Å—Ç–æ–º */
        }

        .content, .title-content {
            position: relative;
            z-index: 1;
            color: white;
            text-align: center;
            transition: opacity 0.3s ease, transform 0.5s ease-in-out;
            transform: translateY(-20px); /* –ù–∞—á–∞–ª—å–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ: —Å–º–µ—â–µ–Ω–∏–µ –≤–≤–µ—Ä—Ö */
            animation: fadeInMove 0.9s forwards;
            max-height: 50%;
            overflow-y: auto;
        }

        
        .content.hidden, .title-content.hidden {
            opacity: 0;
            visibility: hidden;
            transform: translate(-50%, -50%) scale(0.5); /* –£–º–µ–Ω—å—à–∞–µ–º –∏ –ø–µ—Ä–µ–º–µ—â–∞–µ–º –∑–∞–≥–æ–ª–æ–≤–æ–∫ */
        }
        


        .neon-border {
            border: 2px solid rgba(255, 255, 255, 0.2);
            border-radius: 10px;
            box-shadow: 0 0 15px rgba(255, 0, 255, 0.5);
            transition: box-shadow 0.3s ease, transform 0.3s ease;
        }

        .neon-border:hover {
            box-shadow: 0 0 30px rgba(255, 0, 255, 0.7);
            transform: scale(1.05);
        }

        .neon-icon {
            color: #ff00ff;
        }

        .search-bar {
            background: rgba(255, 255, 255, 0.1);
            border: 2px solid rgba(255, 255, 255, 0.3);
            border-radius: 10px;
            padding: 10px;
            width: 100%;
            color: white;
            margin-right: 8px;
        }
        
        .red-border {
            border: 2px solid red;
        }

        .gray-border {
            border: 2px solid gray;
        }
        .modal-content .button-row {
            display: flex;
            justify-content: space-between;
            margin-top: 20px;
        }

        /* ‚ú® –°—Ç–∏–ª—å –¥–ª—è –∞–∫—Ç–∏–≤–Ω–æ–π –∫–Ω–æ–ø–∫–∏ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏ */
        .button.active {
            background: rgba(255, 0, 255, 0.3);
            border-color: #ff00ff;
            box-shadow: 0 0 10px #ff00ff;
            color: white;
        }

        .small-logo {
            display: flex;
            align-items: center;
            justify-content: space-between;
          }
          
          .small-logo h2 {
            max-width: 0;
            overflow: hidden;
            white-space: nowrap;
            transition: max-width 0.5s ease-in-out, opacity 0.5s ease-in-out;
          }
          
          .small-logo.open h2 {
            max-width: 1000px; /* –ó–∞–¥–∞–π—Ç–µ –º–∞–∫—Å–∏–º–∞–ª—å–Ω—É—é —à–∏—Ä–∏–Ω—É, —á—Ç–æ–±—ã –≤–º–µ—Å—Ç–∏—Ç—å —Ç–µ–∫—Å—Ç */
            opacity: 1;
          }
          
          .small-logo.closed h2 {
            max-width: 0;
            opacity: 0;
          }
          
          .blur-background {
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 120px;
            backdrop-filter: blur(10px);
            z-index: 10;
            background: rgba(204, 77, 204, 0.1);
            animation: moveBackground 10s linear infinite;
        }

        @keyframes moveBackground {
            0% {
                background-position: 0 0;
            }
            100% {
                background-position: 1000px 1000px;
            }
        }
        /* –ù–∞—á–∞–ª—å–Ω—ã–µ —Å—Ç–∏–ª–∏ –¥–ª—è –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ –∏ —ç–ª–µ–º–µ–Ω—Ç–æ–≤ */
        .parallax {
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh; /* –í—ã—Å–æ—Ç–∞ —ç–∫—Ä–∞–Ω–∞ */
            perspective: 1000px;
            overflow: hidden;
        }

        .parallax-layer {
            transform-style: preserve-3d;
            transition: transform 1s cubic-bezier(0.68, -0.55, 0.27, 1.55), opacity 0.8s ease-in-out;
            position: absolute;
            width: 100%;
            max-width: 1200px; /* –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è —à–∏—Ä–∏–Ω–∞ –¥–ª—è —Å–æ–¥–µ—Ä–∂–∏–º–æ–≥–æ */
            padding: 20px;
            box-sizing: border-box;
        }

        /* –°—Ç–∏–ª–∏ –¥–ª—è scrollA –∏ scrollB */
        .scrollA {
            transform: translateY(0);
            overflow-y: auto; 
            height: 50vh;
        }

        .scrollB {
            transform: translateY(100%);
            opacity: 0;
            overflow-y: auto; /* –î–æ–±–∞–≤–ª—è–µ–º –ø—Ä–æ–∫—Ä—É—Ç–∫—É –ø–æ –æ—Å–∏ Y */
            height: 50vh; /* –í—ã—Å–æ—Ç–∞ —ç–∫—Ä–∞–Ω–∞ –¥–ª—è scrollB */
        }

        /* –ö–ª–∞—Å—Å—ã –¥–ª—è —Å–∫—Ä—ã—Ç–∏—è –∏ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è —ç–ª–µ–º–µ–Ω—Ç–æ–≤ */
        .hidden-form {
            transform: translateY(-100%);
            opacity: 0;
        }

        .visible-list {
            transform: translateY(0);
            opacity: 1;
        }

    </style>
    {% include "includes/favicon.html" %}
    {% comment %} {% include "includes/cursor.html" %} {% endcomment %}
</head>
<body>
    
    <div class="bg-transparent fixed top-0 left-0 right-0 z-50 flex items-center justify-between p-4">
        <div id="smallLogo" class="small-logo hidden flex items-center space-x-1">
          <i class="fas fa-terminal text-2xl"></i>
          <h1 class="text-white text-2xl font-bold mr-3 pr-3">Studio</h1>
          [<h2 class="text-gray-500 z-10 font-bold pr-1">{% block title %}{% endblock %} </h2>]
        </div>
      </div>
      
    <canvas id="renderCanvas"></canvas>

    {% block content %}

    {% endblock %}
   

    <div class="button-container relative z-20">
        <a href="{% url 'index' %}" id="nav-home" class="button text-white">
            <i class="fas fa-home"></i>
            <span>–ì–ª–∞–≤–Ω–∞—è</span>
        </a>
        <a href="{% url 'environment_variables' %}" id="nav-environment-variables" class="button text-white">
            <i class="fa fa-key"></i>
            <span>–ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ</span>
        </a>
        <a href="{% url 'commands' %}" id="nav-commands" class="button text-white">
            <i class="fas fa-code"></i>
            <span>–ö–æ–º–∞–Ω–¥—ã</span>
        </a>

        <a href="{% url 'commandset' %}" id="nav-commandset" class="button text-white">
            <i class="fas fa-random"></i>
            <span>–ö–æ–º–±–∏–Ω–∞—Ü–∏–∏</span>
        </a>

        <a href="{% url 'scenario' %}" id="nav-scenarios" class="button text-white">
            <i class="fa fa-scroll"></i>
            <span>–°—Ü–µ–Ω–∞—Ä–∏–∏</span>
        </a>
        <a href="{% url 'terminals' %}" id="nav-terminals" class="button text-white">
            <i class="fas fa-terminal"></i>
            <span>–¢–µ—Ä–º–∏–Ω–∞–ª—ã</span>
        </a>
        <a href="{% url 'tasks' %}" id="nav-tasks" class="button text-white">
            <i class="fas fa-tasks"></i>
            <span>–ó–∞–¥–∞—á–∏</span>
        </a>
        <a href="/admin/" id="nav-admin" class="button text-white">
            <i class="fas fa-cog"></i>
            <span>–ê–¥–º–∏–Ω</span>
        </a>
    </div>
    <div class="blur-background"></div>
      <script src="https://cdn.babylonjs.com/babylon.js"></script>
      <script src="https://cdn.babylonjs.com/materialsLibrary/babylon.gridMaterial.js"></script>
      <script src="https://cdn.babylonjs.com/particles/babylon.particleHelper.min.js"></script>
      <script>
            var canvas = document.getElementById("renderCanvas");
            var engine = new BABYLON.Engine(canvas, true);
            var contextMenu = document.getElementById('contextMenu');
            var content = document.querySelector('.content');
        
            // –°–æ–∑–¥–∞–µ–º –Ω–æ–≤—ã–π canvas –¥–ª—è –æ—Ç—Ä–∏—Å–æ–≤–∫–∏ –ª–∏—Ü–∞
            var faceCanvas = document.createElement('canvas');
            faceCanvas.id = "faceCanvas";
            faceCanvas.style.position = "absolute";
            // –ò–∑–º–µ–Ω—è–µ–º top –Ω–∞ 0 –∏ –¥–æ–±–∞–≤–ª—è–µ–º –∞–Ω–∏–º–∞—Ü–∏—é –ø–ª–∞–≤–Ω–æ–≥–æ –æ–ø—É—Å–∫–∞–Ω–∏—è
            faceCanvas.style.top = "0"; // –ù–∞—á–∞–ª—å–Ω–æ–µ –ø–æ–ª–æ–∂–µ–Ω–∏–µ
            faceCanvas.style.opacity = "0"; // –ù–∞—á–∞–ª—å–Ω–∞—è –ø—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç—å
            faceCanvas.style.transition = "top 2s, opacity 2s"; 
            faceCanvas.style.left = "50%"; // –û—Ç—Å—Ç—É–ø —Å–ª–µ–≤–∞
            faceCanvas.style.filter = "blur(10px)";
            faceCanvas.style.transform = "translateX(-50%)"; // –¶–µ–Ω—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª–∏
            faceCanvas.width = 380;  // –£–º–µ–Ω—å—à–µ–Ω–Ω—ã–µ —Ä–∞–∑–º–µ—Ä—ã –¥–ª—è canvas
            faceCanvas.height = 300;

            document.body.appendChild(faceCanvas);
            document.addEventListener("DOMContentLoaded", function() {
                setTimeout(function() {
                    faceCanvas.style.top = "2px"; // –ö–æ–Ω–µ—á–Ω–æ–µ –ø–æ–ª–æ–∂–µ–Ω–∏–µ –ø–æ—Å–ª–µ –∑–∞–¥–µ—Ä–∂–∫–∏
                    faceCanvas.style.opacity = "1"; // –ü–æ–ª–Ω–∞—è –Ω–µ–ø—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç—å –ø–æ—Å–ª–µ –∑–∞–¥–µ—Ä–∂–∫–∏
                    faceCanvas.style.filter = "blur(1px)"; // –£–±–∏—Ä–∞–µ–º blur
                }, 2000); // –ó–∞–¥–µ—Ä–∂–∫–∞ 2 —Å–µ–∫—É–Ω–¥—ã
            });
            
            function hideFaceCanvas() {
                faceCanvas.style.top = "0"; // –ù–∞—á–∞–ª—å–Ω–æ–µ –ø–æ–ª–æ–∂–µ–Ω–∏–µ
                faceCanvas.style.opacity = "0"; // –ù–∞—á–∞–ª—å–Ω–∞—è –ø—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç—å
            }
          var faceCtx = faceCanvas.getContext('2d');
      
          var createScene = function() {
              console.log("Creating scene...");
              var scene = new BABYLON.Scene(engine);
              scene.clearColor = new BABYLON.Color4(0, 0, 0, 1); // –ß–µ—Ä–Ω—ã–π —Ñ–æ–Ω
      
              var camera = new BABYLON.FreeCamera("camera1", new BABYLON.Vector3(0, 2, -10), scene);
              camera.setTarget(new BABYLON.Vector3(0, 2, 0));
              camera.inputs.clear();
      
              var light = new BABYLON.HemisphericLight("light1", new BABYLON.Vector3(0, 1, 0), scene);
              light.intensity = 0.7;
      
              // –ó–µ–º–ª—è (–Ω–∏–∑) —Å –∞–Ω–∏–º–∞—Ü–∏–µ–π
              var ground = BABYLON.MeshBuilder.CreateGround("ground", {width: 1000, height: 1000}, scene);
              var gridMaterial = new BABYLON.GridMaterial("grid", scene);
              gridMaterial.lineColor = new BABYLON.Color3(0.8, 0.3, 0.8);
              gridMaterial.majorUnitFrequency = 5;
              gridMaterial.minorUnitVisibility = 0.45;
              gridMaterial.gridRatio = 0.5;
              ground.material = gridMaterial;
      
              // –ü–ª–∞–≤–Ω–æ–µ –¥–≤–∏–∂–µ–Ω–∏–µ –∫–∞–º–µ—Ä—ã
              var speed = 0.05;
              scene.registerBeforeRender(function() {
                  camera.position.z += speed;
                  if (camera.position.z > 500) {
                      camera.position.z = -500;
                  }
              });
      
              // –ò–∑–º–µ–Ω–µ–Ω–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ —Å–∏—Å—Ç–µ–º—ã —á–∞—Å—Ç–∏—Ü
              var particleSystem = new BABYLON.ParticleSystem("particles", 200, scene); // –ï—â—ë —É–º–µ–Ω—å—à–∏—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —á–∞—Å—Ç–∏—Ü
              particleSystem.particleTexture = new BABYLON.Texture("https://www.babylonjs.com/assets/Flare.png", scene);
              particleSystem.minEmitBox = new BABYLON.Vector3(-0.2, 0, 0); // –ï—â—ë —É–º–µ–Ω—å—à–∏—Ç—å –¥–∏–∞–ø–∞–∑–æ–Ω —ç–º–∏—Å—Å–∏–∏
              particleSystem.maxEmitBox = new BABYLON.Vector3(0.2, 0, 0);
              particleSystem.color1 = new BABYLON.Color4(0.8, 0.1, 0.8, 0.5); // –°–¥–µ–ª–∞—Ç—å —á–∞—Å—Ç–∏—Ü—ã –º–µ–Ω–µ–µ —è—Ä–∫–∏–º–∏
              particleSystem.color2 = new BABYLON.Color4(0.5, 0, 0.5, 0.3);
              particleSystem.colorDead = new BABYLON.Color4(0, 0, 0, 0.0);
              particleSystem.minSize = 0.02; // –ï—â—ë —É–º–µ–Ω—å—à–∏—Ç—å —Ä–∞–∑–º–µ—Ä —á–∞—Å—Ç–∏—Ü
              particleSystem.maxSize = 0.1;
              particleSystem.minLifeTime = 0.4;
              particleSystem.maxLifeTime = 0.8;
              particleSystem.emitRate = 100; // –ï—â—ë —É–º–µ–Ω—å—à–∏—Ç—å —Å–∫–æ—Ä–æ—Å—Ç—å —ç–º–∏—Å—Å–∏–∏
              particleSystem.blendMode = BABYLON.ParticleSystem.BLENDMODE_ONEONE;
              particleSystem.gravity = new BABYLON.Vector3(0, -9.81, 0);
              particleSystem.direction1 = new BABYLON.Vector3(-0.2, 1, 0.2);
              particleSystem.direction2 = new BABYLON.Vector3(0.2, 1, -0.2);
              particleSystem.minAngularSpeed = 0;
              particleSystem.maxAngularSpeed = Math.PI;
              particleSystem.minEmitPower = 0.3; // –ï—â—ë —É–º–µ–Ω—å—à–∏—Ç—å –º–æ—â–Ω–æ—Å—Ç—å —ç–º–∏—Å—Å–∏–∏
              particleSystem.maxEmitPower = 1.0;
              particleSystem.updateSpeed = 0.015;
              particleSystem.start();
      
              // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–æ–∑–∏—Ü–∏–∏ —Å–∏—Å—Ç–µ–º—ã —á–∞—Å—Ç–∏—Ü –Ω–∞ –æ—Å–Ω–æ–≤–µ –ø–æ–∑–∏—Ü–∏–∏ –∫—É—Ä—Å–æ—Ä–∞
              canvas.addEventListener("mousemove", function(event) {
                  var pickResult = scene.pick(event.clientX, event.clientY);
                  if (pickResult.hit) {
                      particleSystem.emitter = pickResult.pickedPoint;
                  }
              });
      
            // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –∞–Ω–∏–º–∞—Ü–∏–∏ –ø–ª–∞–º–µ–Ω–∏ —Å —Ç–µ–∫—Å—Ç—É—Ä–æ–π, –¥—ã–º–æ–º –∏ –ø–ª–∞–≤–Ω—ã–º –¥–≤–∏–∂–µ–Ω–∏–µ–º
            var drawFlame = function(ctx, x, y, width, height) {
                var flameColors = ['rgba(0, 255, 0, 1)', 'rgba(50, 205, 50, 1)', 'rgba(34, 139, 34, 1)'];
                var smokeColors = ['rgba(255, 255, 255, 0.1)', 'rgba(255, 255, 255, 0.2)'];
                var flameHeight = height;
            
                for (var i = 0; i < flameHeight; i++) {
                    var flameWidth = width * (1 - i / flameHeight); // –°—É–∂–µ–Ω–∏–µ –ø–ª–∞–º–µ–Ω–∏ –∫ –≤–µ—Ä—Ö—É
                    var flameX = x + Math.random() * width - flameWidth / 2;
                    var flameY = y - i * 1.5;  // –ü–ª–∞–º—è –ø–æ–¥–Ω–∏–º–∞–µ—Ç—Å—è –≤–≤–µ—Ä—Ö –ø–æ –¥–∏–∞–≥–æ–Ω–∞–ª–∏
                    ctx.fillStyle = flameColors[Math.floor(Math.random() * flameColors.length)];
                    ctx.fillRect(flameX, flameY, flameWidth, 1);
            
                    // –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –¥—ã–º–∞
                    if (i % 5 === 0) {
                        var smokeWidth = flameWidth * 1.5;
                        var smokeX = flameX + Math.random() * smokeWidth - smokeWidth / 2;
                        var smokeY = flameY - Math.random() * 10;
                        ctx.fillStyle = smokeColors[Math.floor(Math.random() * smokeColors.length)];
                        ctx.fillRect(smokeX, smokeY, smokeWidth, 2);
                    }
                }
            };
            
            var drawNeonFace = function(points) {
                faceCtx.clearRect(0, 0, faceCanvas.width, faceCanvas.height);
                faceCtx.strokeStyle = "lime";
                faceCtx.lineWidth = 2;
            
                var drawFacePart = function(part) {
                    faceCtx.beginPath();
                    faceCtx.moveTo(part[0][0] / 2, part[0][1] / 2);
                    for (var i = 1; i < part.length; i++) {
                        faceCtx.lineTo(part[i][0] / 2, part[i][1] / 2);
                    }
                    faceCtx.stroke();
                };
            
                drawFacePart(points.upper_nose);
                drawFacePart(points.right_eyebrow);
                drawFacePart(points.left_eyebrow);
                drawFacePart(points.right_eye);
                drawFacePart(points.left_eye);
                drawFacePart(points.mouth);
                drawFacePart(points.jaw);
                drawFacePart(points.chin);
                drawFacePart(points.cheeks);
            
                // –ê–Ω–∏–º–∞—Ü–∏—è –ø–ª–∞–º–µ–Ω–∏ –≤ –≥–ª–∞–∑–∞—Ö
                var rightEye = points.right_eye;
                var leftEye = points.left_eye;
            
                if (rightEye.length > 0 && leftEye.length > 0) {
                    var rightEyeCenterX = (rightEye[0][0] + rightEye[3][0]) / 2;
                    var rightEyeCenterY = (rightEye[1][1] + rightEye[4][1]) / 2;
                    var leftEyeCenterX = (leftEye[0][0] + leftEye[3][0]) / 2;
                    var leftEyeCenterY = (leftEye[1][1] + leftEye[4][1]) / 2;
            
                    drawFlame(faceCtx, rightEyeCenterX / 2 - 5, rightEyeCenterY / 2, 15, 20);  // –ü–ª–∞–º—è –Ω–µ–º–Ω–æ–≥–æ –Ω–∏–∂–µ –∏ –±–æ–ª—å—à–µ
                    drawFlame(faceCtx, leftEyeCenterX / 2 - 5, leftEyeCenterY / 2, 15, 20);   // –ü–ª–∞–º—è –Ω–µ–º–Ω–æ–≥–æ –Ω–∏–∂–µ –∏ –±–æ–ª—å—à–µ
                }
            
                // –î–æ—Ä–∏—Å–æ–≤–∫–∞ –æ–≤–∞–ª–∞ –ª–∏—Ü–∞
                var oval = points.oval;
                faceCtx.beginPath();
                faceCtx.moveTo(oval[0][0] / 2, oval[0][1] / 2);
                for (var i = 1; i < oval.length; i++) {
                    faceCtx.lineTo(oval[i][0] / 2, oval[i][1] / 2);
                }
                faceCtx.stroke();
            };
            
            


              var socket = new WebSocket("ws://localhost:9991/ws/video/");
              socket.binaryType = "arraybuffer";
      
              socket.onopen = function() {
                  console.log("WebSocket connection established.");
              };
      
              socket.onerror = function(error) {
                  console.log("WebSocket error: ", error);
              };
      
              socket.onmessage = function(event) {
                  var data = JSON.parse(event.data);
                  if (data.length > 0) {
                      drawNeonFace(data[0]);
                  } else {
                      console.info("No face data received");
                      
                  }
              };
      
              navigator.mediaDevices.getUserMedia({video: true}).then(function(stream) {
                  console.log("Access to webcam granted.");
                  var video = document.createElement('video');
                  video.srcObject = stream;
                  video.play();
      
                  var canvas = document.createElement('canvas');
                  canvas.width = 240;  // –£–º–µ–Ω—å—à–µ–Ω–Ω—ã–µ —Ä–∞–∑–º–µ—Ä—ã –¥–ª—è canvas
                  canvas.height = 160;
                  var ctx = canvas.getContext('2d', {willReadFrequently: true});
      
                  setInterval(function() {
                      ctx.drawImage(video, 0, 0, canvas.width, canvas.height);
                      var imageData = ctx.getImageData(0, 0, canvas.width, canvas.height);
                      // console.log("Sending frame data to WebSocket.");
                      socket.send(imageData.data.buffer);
                  }, 100);
              }).catch(function(error) {
                  console.log("Error accessing webcam: ", error);
              });
      
              return scene;
          };
      
          var scene = createScene();
          engine.runRenderLoop(function() {
              scene.render();
          });
      
          window.addEventListener("resize", function() {
              engine.resize();
              faceCanvas.style.width = window.innerWidth / 4 + "px";
              faceCanvas.style.height = window.innerHeight / 4 + "px";
          });


      
          function toggleVisibility() {
              const content = document.querySelector('.title-content');
              const smallLogo = document.getElementById("smallLogo");
      
              if (content) {
                  content.classList.add('hidden');
              }
      
              if (smallLogo) {
                  smallLogo.classList.add('visible');
                  smallLogo.classList.remove('hidden');
              }
          }
      
          document.addEventListener("DOMContentLoaded", toggleVisibility);
      
          let lastInputTime = Date.now();
          let inputCounter = 0;
          let inputSpeed = 0;
          let resetColorTimeout;
      
          function calculateInputSpeed() {
              const currentTime = Date.now();
              const timeDifference = currentTime - lastInputTime;
              inputSpeed = timeDifference ? 1000 / timeDifference : 0;
              lastInputTime = currentTime;
          }
      
          function getIntensity(speed) {
              return Math.min(speed / 10, 1);
          }
      
          function animateColor(scene, targetColor) {
              const animation = new BABYLON.Animation("colorAnimation", "clearColor", 60, BABYLON.Animation.ANIMATIONTYPE_COLOR4, BABYLON.Animation.ANIMATIONLOOPMODE_CONSTANT);
      
              const keys = [];
              keys.push({ frame: 0, value: scene.clearColor.clone() });
              keys.push({ frame: 100, value: targetColor });
      
              animation.setKeys(keys);
              scene.beginDirectAnimation(scene, [animation], 0, 100, false);
          }
      
          function setInteractionColor(scene, intensity, colorType = "blue") {
              let targetColor;
              let lineColor;
      
              switch (colorType) {
                  case "green":
                      targetColor = new BABYLON.Color4(0.0, 0.5 * intensity, 0.0, 1); // –ó–µ–ª–µ–Ω—ã–π —Ñ–æ–Ω
                      lineColor = new BABYLON.Color3(0.0, 1.0 * intensity, 0.0); // –ó–µ–ª–µ–Ω—ã–π —Ü–≤–µ—Ç –ª–∏–Ω–∏–π
                      break;
                  case "red":
                      targetColor = new BABYLON.Color4(0.5 * intensity, 0.0, 0.0, 1); // –ö—Ä–∞—Å–Ω—ã–π —Ñ–æ–Ω
                      lineColor = new BABYLON.Color3(1.0 * intensity, 0.0, 0.0); // –ö—Ä–∞—Å–Ω—ã–π —Ü–≤–µ—Ç –ª–∏–Ω–∏–π
                      break;
                  case "yellow":
                      targetColor = new BABYLON.Color4(0.5 * intensity, 0.5 * intensity, 0.0, 1); // –ñ–µ–ª—Ç—ã–π —Ñ–æ–Ω
                      lineColor = new BABYLON.Color3(1.0 * intensity, 1.0 * intensity, 0.0); // –ñ–µ–ª—Ç—ã–π —Ü–≤–µ—Ç –ª–∏–Ω–∏–π
                      break;
                  default:
                      targetColor = new BABYLON.Color4(0.0, 0.0, 0.5 * intensity, 1); // –°–∏–Ω–∏–π —Ñ–æ–Ω
                      lineColor = new BABYLON.Color3(0.0, 0.0, 1.0 * intensity); // –°–∏–Ω–∏–π —Ü–≤–µ—Ç –ª–∏–Ω–∏–π
              }
      
              animateColor(scene, targetColor);
              scene.meshes.forEach(mesh => {
                  if (mesh.material && mesh.material.name === "grid") {
                      mesh.material.lineColor = lineColor;
                  }
              });
          }
      
          // –ü—Ä–∏–º–µ—Ä—ã –≤—ã–∑–æ–≤–∞ —Ñ—É–Ω–∫—Ü–∏–π –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —Ü–≤–µ—Ç–æ–≤ –ø—Ä–∏ —É—Å–ø–µ—Ö–µ
          function onSuccessGreen() {
              setInteractionColor(scene, 1, "green"); // –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è intensity –∑–µ–ª–µ–Ω–æ–≥–æ —Ü–≤–µ—Ç–∞
              scheduleResetColor(scene); // –í–æ–∑–≤—Ä–∞—Ç —Ü–≤–µ—Ç–∞ –ø–æ—Å–ª–µ 1 —Å–µ–∫—É–Ω–¥—ã
          }
      
          function onSuccessRed() {
              setInteractionColor(scene, 1, "red"); // –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è intensity –∫—Ä–∞—Å–Ω–æ–≥–æ —Ü–≤–µ—Ç–∞
              scheduleResetColor(scene); // –í–æ–∑–≤—Ä–∞—Ç —Ü–≤–µ—Ç–∞ –ø–æ—Å–ª–µ 1 —Å–µ–∫—É–Ω–¥—ã
          }
      
          function onSuccessYellow() {
              setInteractionColor(scene, 1, "yellow"); // –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è intensity –∂–µ–ª—Ç–æ–≥–æ —Ü–≤–µ—Ç–∞
              scheduleResetColor(scene); // –í–æ–∑–≤—Ä–∞—Ç —Ü–≤–µ—Ç–∞ –ø–æ—Å–ª–µ 1 —Å–µ–∫—É–Ω–¥—ã
          }
      
          function resetColor(scene) {
              const targetColor = new BABYLON.Color4(0.0, 0.0, 0.0, 1); // –ß–µ—Ä–Ω—ã–π —Ñ–æ–Ω
              animateColor(scene, targetColor);
              scene.meshes.forEach(mesh => {
                  if (mesh.material && mesh.material.name === "grid") {
                      mesh.material.lineColor = new BABYLON.Color3(0.8, 0.3, 0.8); // –†–æ–∑–æ–≤—ã–π —Ü–≤–µ—Ç –ª–∏–Ω–∏–π
                  }
              });
          }
      
          function scheduleResetColor(scene) {
              if (resetColorTimeout) {
                  clearTimeout(resetColorTimeout);
              }
              resetColorTimeout = setTimeout(() => resetColor(scene), 1000); // 1 —Å–µ–∫—É–Ω–¥–∞ –ø—Ä–æ—Å—Ç–æ—è –¥–æ –≤–æ–∑–≤—Ä–∞—Ç–∞ —Ü–≤–µ—Ç–∞
          }
      
          document.querySelectorAll('input').forEach(input => {
              input.addEventListener('focus', () => {
                  inputCounter = 0;
                  setInteractionColor(scene, 0.1); // –ù–∞—á–∞–ª—å–Ω—ã–π —Ü–≤–µ—Ç –ø—Ä–∏ —Ñ–æ–∫—É—Å–µ
                  scheduleResetColor(scene);
              });
      
              input.addEventListener('input', () => {
                  calculateInputSpeed();
                  inputCounter++;
                  const intensity = getIntensity(inputSpeed * inputCounter);
                  setInteractionColor(scene, intensity);
                  scheduleResetColor(scene);
              });
      
              input.addEventListener('blur', () => {
                  inputCounter = 0;
                  inputSpeed = 0;
                  scheduleResetColor(scene);
              });
          });
      
          document.addEventListener("DOMContentLoaded", function() {
              // –ü–æ–ª—É—á–∞–µ–º —Ç–µ–∫—É—â–∏–π URL
              var currentUrl = window.location.pathname;
      
              // –ü–µ—Ä–µ–±–∏—Ä–∞–µ–º –≤—Å–µ —Å—Å—ã–ª–∫–∏ –∏ –¥–æ–±–∞–≤–ª—è–µ–º –∫–ª–∞—Å—Å –∞–∫—Ç–∏–≤–Ω–æ–π –∫–Ω–æ–ø–∫–µ
              document.querySelectorAll('.button').forEach(function(button) {
                  var href = button.getAttribute('href');
                  if (currentUrl === href) {
                      button.classList.add('active');
                  }
              });
          });
      
          document.addEventListener("DOMContentLoaded", function() {
              const smallLogo = document.getElementById("smallLogo");
              const buttonContainer = document.querySelector(".button-container");
              const buttons = buttonContainer.querySelectorAll(".button");
      
              // –ò–∑–Ω–∞—á–∞–ª—å–Ω–æ —Å–∫–æ–±–∫–∏ –∑–∞–∫—Ä—ã—Ç—ã
              smallLogo.classList.add("closed");
      
              // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ—Ç–∫—Ä—ã—Ç–∏—è —Å–∫–æ–±–æ–∫ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
              function openBrackets() {
                  smallLogo.classList.remove("closed");
                  smallLogo.classList.add("open");
              }
      
              // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –∑–∞–∫—Ä—ã—Ç–∏—è —Å–∫–æ–±–æ–∫
              function closeBrackets() {
                  smallLogo.classList.remove("open");
                  smallLogo.classList.add("closed");
              }
      
              // –û—Ç–∫—Ä—ã—Ç–∏–µ —Å–∫–æ–±–æ–∫ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
              setTimeout(openBrackets, 500); // –ó–∞–¥–µ—Ä–∂–∫–∞ –¥–ª—è –ø–ª–∞–≤–Ω–æ–≥–æ —ç—Ñ—Ñ–µ–∫—Ç–∞
      
              // –ó–∞–∫—Ä—ã—Ç–∏–µ —Å–∫–æ–±–æ–∫ –∏ –ø–µ—Ä–µ—Ö–æ–¥ –Ω–∞ –¥—Ä—É–≥—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É –ø—Ä–∏ –Ω–∞–∂–∞—Ç–∏–∏ –Ω–∞ –∫–Ω–æ–ø–∫—É
              buttons.forEach(button => {
                  button.addEventListener("click", function(event) {
                      event.preventDefault();
                      hideFaceCanvas();
                      closeBrackets();
                      const href = this.getAttribute("href");
                      setTimeout(() => {
                          window.location.href = href;
                      }, 500); // –ó–∞–¥–µ—Ä–∂–∫–∞ –¥–ª—è –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –∞–Ω–∏–º–∞—Ü–∏–∏
                  });
              });
          });

          
      </script>
      <script>
        try{
            var formSection = document.querySelector('.scrollA');
            var listSection = document.querySelector('.scrollB');
                
            function handleScrollToggle () {
                if (formSection.classList.contains('hidden-form')) {
                    formSection.classList.remove('hidden-form');
                    listSection.classList.remove('visible-list');
                } else {
                    formSection.classList.add('hidden-form');
                    listSection.classList.add('visible-list');
                }
            };
            
            document.addEventListener('DOMContentLoaded', () => {
                let isScrolling = false;
            
                const onScroll = (event) => {
                    if (isScrolling) return; // –ü—Ä–µ—Ä—ã–≤–∞–Ω–∏–µ, –µ—Å–ª–∏ —É–∂–µ –∏–¥–µ—Ç –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ
            
                    if (formSection && listSection) {
                        if (event.deltaY > 0) { // –ü—Ä–æ–∫—Ä—É—Ç–∫–∞ –≤–Ω–∏–∑
                            if (!formSection.classList.contains('hidden-form')) {
                                handleScrollToggle();
                            }
                        } else { // –ü—Ä–æ–∫—Ä—É—Ç–∫–∞ –≤–≤–µ—Ä—Ö
                            if (formSection.classList.contains('hidden-form')) {
                                const scrollTop = listSection.scrollTop;
                                if (scrollTop === 0) {
                                    handleScrollToggle();
                                }
                            }
                        }
                    }
            
                    // –û—Ç–∫–ª—é—á–µ–Ω–∏–µ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ —á–µ—Ä–µ–∑ 1 —Å–µ–∫—É–Ω–¥—É
                    isScrolling = true;
                    setTimeout(() => {
                        isScrolling = false;
                    }, 1000);
                };
                if (!listSection) {
                    console.error('Element with class .scrollB not found');
                    return
                }
                listSection.addEventListener('scroll', () => {
                    const scrollTop = listSection.scrollTop;
                    const scrollHeight = listSection.scrollHeight;
                    const clientHeight = listSection.clientHeight;
            
                    // –ï—Å–ª–∏ –ø—Ä–æ–∫—Ä—É—Ç–∫–∞ –≤–≤–µ—Ä—Ö—É –∏–ª–∏ –≤–Ω–∏–∑—É, —Ä–∞–∑–±–ª–æ–∫–∏—Ä—É–µ–º –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ
                    if (scrollTop === 0 || scrollTop + clientHeight >= scrollHeight) {
                        isScrolling = false;
                    }
                });
            
                if (!formSection) {
                    console.error('Element with class .scrollA not found');
                }
             
                document.addEventListener('wheel', onScroll);
            
                formSection.addEventListener('scroll', (event) => {
                    const scrollTop = formSection.scrollTop;
                    const scrollHeight = formSection.scrollHeight;
                    const clientHeight = formSection.clientHeight;
            
                    // –ï—Å–ª–∏ –ø—Ä–æ–∫—Ä—É—Ç–∫–∞ –≤–Ω–∏–∑, –ø–µ—Ä–µ–∫–ª—é—á–∞–µ–º –≤–∏–¥–∏–º–æ—Å—Ç—å
                    if (scrollTop + clientHeight >= scrollHeight) {
                        handleScrollToggle();
                    }
                });
            });
        }
        catch {
            console.log("No need to parallax")
        }
        
        </script>
        

    {% block js %}

    {% endblock %}
    {% comment %} {% include "includes/cursorjs.html" %} {% endcomment %}
</body>
</html>
